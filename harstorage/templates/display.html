<%inherit file="/base.html"/>
<%def name="title()">Test Flow</%def>

<center>
<div id="timeline_div" style="width:960px"></div>
    <div style="width:960px;margin-top:1em;text-align:left;"> 
        <h4>Average Stats</h4> 
    </div>
	<div style="width:960px;">
        <table class="display" id="stats_table" cellpadding="0" cellspacing="0" border="0">
            <thead>
                <tr>
                    <th width="36%" style="text-align:left;">Label</th>
                    <th width="16%" >Page Speed Score</th>
                    <th width="16%" >Total Size</th>
                    <th width="16%" >Total Requests</th>
                    <th width="16%" >Full Time</th>
                </tr>
            </thead>
            <tbody>
                % for index in range(c.rowcount):
                <tr>
                    <td class="stats_td"><a href="${h.url_for(controller='results',action='details',label=c.metrics_table[0][index],method='GET')}">${c.metrics_table[0][index]}</a></td>
                    <td class="center">${c.metrics_table[1][index]}</td>
                    <td class="center">${c.metrics_table[2][index]}</td>
                    <td class="center">${c.metrics_table[3][index]}</td>
                    <td class="center">${c.metrics_table[4][index]}</td>
                </tr>
                % endfor
            <tbody>
        </table>
	</div>
</center>

<script>
	$LAB
        .script("${h.url_for('/scripts/datatables/jquery.dataTables.min.js')}")
        .script("${h.url_for('/scripts/hs-ui.js')}").wait()
</script>

<script type='text/javascript' src="${h.url_for('/scripts/plots.js')}"></script>

<script type='text/javascript'>
	function setTimeLine(){
        var timeHash = new Array();
        var sizeHash = new Array();
        var reqHash = new Array();
        var scoreHash = new Array();
        % for key,value in c.time_hash.items():
            timeHash["${key}"] = ${value};
        % endfor
        % for key,value in c.size_hash.items():
            sizeHash["${key}"] = ${value};
        % endfor
        % for key,value in c.requests_hash.items():
            reqHash["${key}"] = ${value};
        % endfor
        % for key,value in c.score_hash.items():
            scoreHash["${key}"] = ${value};
        % endfor

        drawTimeLine(timeHash,sizeHash,reqHash,scoreHash);
    }
   
    setTimeLine();
</script>
