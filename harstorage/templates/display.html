<%inherit file="/base.html"/>
<%def name="title()">Superposed Tests | ${c.metric}</%def>

<center>
    <div class="sp-display">
        <div id="chart"></div>
    
        <p class="title">Aggregated Statistics</p>

        <div class="selector">
            <select id="metrics" class="chosen-select">
                <option value="Average">Average</option>
                <option value="Median">Median</option>
                <option value="90th Percentile">90th Percentile</option>
                <option value="Minimum">Minimum</option>
                <option value="Maximum">Maximum</option>s
            </select>
        </div>
    
        <table class="display" id="stats_table">
            <thead>
                <tr>
                    <th width="36%" class="left">Label</th>
                    <th width="16%" class="center">Page Speed Score</th>
                    <th width="16%" class="center">Total Size (kB)</th>
                    <th width="16%" class="center">Total Requests</th>
                    <th width="16%" class="center">Full Time</th>
                </tr>
            </thead>
            <tbody>
                % for index in range(c.rowcount):
                <tr>
                    <td class="left"><a href="${h.url_for(controller='results',action='details',label=c.metrics_table[0][index],method='GET')}">${c.metrics_table[0][index]}</a></td>
                    <td class="center">${c.metrics_table[1][index]}</td>
                    <td class="center">${c.metrics_table[2][index]}</td>
                    <td class="center">${c.metrics_table[3][index]}</td>
                    <td class="center">${c.metrics_table[4][index]}</td>
                </tr>
                % endfor
            </tbody>
        </table>    
    </div>
</center>

<script type='text/javascript'>
    $LAB
    .script("${h.url_for('/scripts/jquery-1.7.min.js')}").wait()
    .script("${h.url_for('/scripts/datatables/jquery.dataTables.min.js?ver=1.8.2')}").wait()
    .script("${h.url_for('/scripts/datatables/ColReorder.min.js?ver=1.0.4')}")
    .script("${h.url_for('/scripts/datatables/TableTools.min.js?ver=1.0.4')}")
    .script("${h.url_for('/scripts/highcharts/highcharts.js?ver=2.1.9')}").wait()
    .script("${h.url_for('/scripts/highcharts/themes.js?ver=')}${c.rev}").wait()
    .script("${h.url_for('/scripts/highcharts/exporting.js?ver=2.1.9')}")
    .script("${h.url_for('/scripts/chosen.jquery.js?ver=0.9.5')}")
    .script("${h.url_for('/scripts/plots.js?ver=')}${c.rev}").wait()
    .wait(function(){
        var columns = new HARSTORAGE.Columns();
        columns.draw("${c.points}");

        HARSTORAGE.AggregatedStatistics();

        $(document).ready(function() {
            $('#stats_table').dataTable({
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "sDom": 'R<"H"Tfr>t<"F"ip>',
                "oTableTools": {
                        "sSwfPath": "/swf/copy_cvs_xls.swf",
                        "aButtons": ["copy", "csv", "xls"]
                },
                "bAutoWidth": false,
                "iDisplayLength": 25
            });
        });
    })
</script>