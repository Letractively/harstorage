<%inherit file="/base.html"/>
<%def name="title()">Test Flow</%def>

<center>
<div id="timeline_div" style="width:960px"></div>
    <div style="width:960px;margin-top:1em;text-align:left;"> 
        <h4>Average Stats</h4> 
    </div>
    <div style="width:960px;">
        <table class="display" id="stats_table" cellpadding="0" cellspacing="0" border="0">
            <thead>
                <tr>
                    <th width="36%" style="text-align:left;">Label</th>
                    <th width="16%" >Page Speed Score</th>
                    <th width="16%" >Total Size</th>
                    <th width="16%" >Total Requests</th>
                    <th width="16%" >Full Time</th>
                </tr>
            </thead>
            <tbody>
                % for index in range(c.rowcount):
                <tr>
                    <td class="stats_td"><a href="${h.url_for(controller='results',action='details',label=c.metrics_table[0][index],method='GET')}">${c.metrics_table[0][index]}</a></td>
                    <td class="center">${c.metrics_table[1][index]}</td>
                    <td class="center">${c.metrics_table[2][index]}</td>
                    <td class="center">${c.metrics_table[3][index]}</td>
                    <td class="center">${c.metrics_table[4][index]}</td>
                </tr>
                % endfor
            </tbody>
        </table>
    </div>
</center>

<script type='text/javascript'>
    $LAB
    .script("${h.url_for('/scripts/datatables/jquery.dataTables.min.js')}")
    .script("${h.url_for('/scripts/datatables/ColReorder.min.js')}").wait()
    .script("${h.url_for('/scripts/datatables/TableTools.min.js')}").wait()
    .script("${h.url_for('/scripts/jsapi.js')}")
    .script("${h.url_for('/scripts/gauge.js')}")
    .script("${h.url_for('/scripts/highcharts/highcharts.js')}")
    .script("${h.url_for('/scripts/highcharts/themes/dark-green.js')}")
    .script("${h.url_for('/scripts/highcharts/modules/exporting.js')}")
    .script("${h.url_for('/scripts/plots.js')}").wait()
    .wait(function(){
        json = eval("(" + "${c.json}".replace(/&quot;/g,'"').replace(/&#34;/g,'"') + ")");
        drawTimeLine(json);

        $(document).ready(function() {
            $('#stats_table').dataTable({
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "sDom": 'R<"H"Tfr>t<"F"ip>',
                "oTableTools": {
                        "sSwfPath": "/swf/copy_cvs_xls.swf",
                        "aButtons": ["copy", "csv", "xls"]
                },
                "bAutoWidth": false
            });
        });
    })
</script>