<%inherit file="/base.html"/>
<%def name="title()">Details | ${c.label}</%def>

<center>
<div id="trends" style="width:960px">
    <h4>Trends</h4>
    <div class="details">
        <div id="timeline_div" style="float:left"></div>
        <div id="trend_selectors" style="float:left;text-align:left">
            <form style="font-size:small;margin-top:1em;color:#498a2d;" name="timeLineForm">  
                <input style="margin-bottom:3em" type="radio" name="timeline" value="Full Time" checked="checked" onClick="setTimeLine('Full Time');"/> Full Time<br />
                <input style="margin-bottom:3em" type="radio" name="timeline" value="Total Size" onClick="setTimeLine('Total Size');"/> Total Size<br />
                <input style="margin-bottom:3em" type="radio" name="timeline" value="Total Requests" onClick="setTimeLine('Total Requests');"/> Total Requests<br />
                <input style="margin-bottom:0em" type="radio" name="timeline" value="Page Speed Score" onClick="setTimeLine('Page Speed Score');"/> Page Speed Score
            </form>
        </div>  
    </div>
</div>
<div style="width:960px" align="center">
    <div style="float:left;text-aling:left;">
        <h4>Run Info</h4>
    </div>
    <div style="text-align:right;margin-top:1em;margin-bottom:1.5em">
        <form>
            <select id="run_timestamp" onchange="displayRunInfo();">
                % for timestamp in c.timestamp:
                <option value="${timestamp}"> ${timestamp}</option>
                % endfor
            </select>
        </form>
    </div>
</div>
<div class="details">
    <h4 style="text-align:center;margin-top:1em">Summary</h4>
    <div>
        <div id="gauge" class="gauge"></div>
        <div id="weight" style="width:510px;height:240px;float:left"></div>
        <div style="width:200px;height:240px;float:left">
            <div class="run_stats">Full Time:</div><div id="run_time" class="run_stats2"></div>
            <div class="run_stats">Total Size:</div><div id="run_size" class="run_stats2"></div>
            <div class="run_stats">Total Requests:</div><div id="run_requests" class="run_stats2"></div>
        </div>
    </div>
</div>
<div class="details">
    <h4 style="text-align:center;margin-top:1em">Page Speed Details</h4>
    <div id='page-speed' style="width:100%"></div>
</div>
<div class="details">
    <h4 style="text-align:center;margin-top:1em">HAR Viewer</h4>
    <div id="harviewer"><iframe src="/results/harviewer" width="940" height="400px" frameborder="0"></iframe></div>
    </div>
</div>
</center>

<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript' src="${h.url_for('/scripts/plots.js')}"></script>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'></script>
<script>
	function setTimeLine(metric){
        var hash = new Array();
        if (metric == "Full Time"){
            % for key,value in c.time_hash.items():
                hash["${key}"] = ${value};
            % endfor
        } else if (metric == "Total Size") {
            % for key,value in c.size_hash.items():
                hash["${key}"] = ${value};
            % endfor
        } else if (metric == "Total Requests") {
            % for key,value in c.requests_hash.items():
                hash["${key}"] = ${value};
            % endfor
        } else if (metric == "Page Speed Score") {
            % for key,value in c.score_hash.items():
                hash["${key}"] = ${value};
            % endfor
        }
        
        drawTimeLine(hash,metric);
    }
   
    setTimeLine(getCheckedValue(document.forms['timeLineForm'].elements['timeline']))
    displayRunInfo();
</script>
